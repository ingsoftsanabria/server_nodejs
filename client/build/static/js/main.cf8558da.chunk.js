(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){e.exports=a(538)},482:function(e,t){},484:function(e,t){},498:function(e,t){},499:function(e,t){},537:function(e,t,a){},538:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(111),r=a.n(s),o=a(541),l=a(12),c=a(47),m={AUTH_STATUS:"AUTH_TRUE",COGNITO_USER:"COGNITO_USER",JWT_TOKEN:"JWT_TOKEN",LOADING_STATUS:"LOADING_TRUE",APP_LANGUAGE:"APP_LANGUAGE"},d="https://huiqj32q2c.execute-api.us-west-2.amazonaws.com/production/faoa",u={devices:d+"/devices/",forecasts:d+"/forecasts"},g={Home:"/",Login:"/login",Menu:"/menu",Profile:"/profile",Dash:"/dashboard",Hist:"/history",Fore:"/forecast",Geofence:"/geofence"},p={Private:g.Login,Public:g.Menu},h={isAuth:!1,cognitoUser:"",jwtToken:"",isLoaded:!1,language:""};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;return t.type===m.AUTH_STATUS?Object.assign({},e,{isAuth:t.payload}):t.type===m.COGNITO_USER?Object.assign({},e,{cognitoUser:t.payload}):t.type===m.JWT_TOKEN?Object.assign({},e,{jwtToken:t.payload}):t.type===m.LOADING_STATUS?Object.assign({},e,{isLoaded:t.payload}):t.type===m.APP_LANGUAGE?Object.assign({},e,{language:t.payload}):e},f=a(4),b=a(5),E=a(7),N=a(6),w=a(8),y=a(542),k=a(115),O=a(543);function j(e){return{type:m.AUTH_STATUS,payload:e}}function C(e){return{type:m.COGNITO_USER,payload:e}}function M(e){return{type:m.JWT_TOKEN,payload:e}}function L(e){return{type:m.LOADING_STATUS,payload:e}}var T=a(35),_=a(69),S="en",x="es",A="General",I="Home",P="Login",D="Navbar",U="Menu",z="Profile",F="Forecast",W="NotFound",H="alert-info",R="btn-send",V="placeholder-command",G="title",J="description",B="btn-to-login",q="title",K="placeholder-email",Q="desc-email",Y="placeholder-pwd",Z="desc-pwd",$="btn-submit-1",X="btn-submit-2",ee="alert-message",te="title-modal-newpass",ae="placeholder-name",ne="desc-name",ie="btn-modal-newpass",se="item-profile",re="item-logout",oe="item-login",le="title-item-dashboard",ce="desc-item-dashboard",me="title-item-history",de="desc-item-history",ue="title-item-forecast",ge="desc-item-forecast",pe="title",he="email",ve="given-name",fe="phone_number",be="phone_number_verified",Ee="email_verified",Ne="verified-yes",we="verified-no",ye="title",ke="subtitle",Oe="high-probability",je="low-probability",Ce="no-probability",Me="frost-12-hours",Le="alert-info",Te="title",_e="Subtitle",Se="description",xe="btn-to-menu",Ae=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e))).words=[],a.state={text:""},a.loadWords(),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({text:this.getWordi18nProps()})}},{key:"loadWords",value:function(){this.words=[{page:A,id:H,es:"\xa1El dispositivo no tiene datos recientes!",en:"The device has no recent data!"},{page:A,id:R,es:"Enviar",en:"Send"},{page:A,id:V,es:"Comando",en:"Command"},{page:I,id:G,es:"Anal\xedtica de datos para la agricultura",en:"Data analytics for agriculture"},{page:I,id:J,es:"\xa1Ingresa y observa el poder de predecir heladas!",en:"Enter and see the power of predicting frost!"},{page:I,id:B,es:"Inicia ahora mismo!",en:"Start right now!"},{page:P,id:q,es:"Por favor inicie sesi\xf3n",en:"Please login"},{page:P,id:K,es:"Correo Electr\xf3nico",en:"Email"},{page:P,id:Q,es:"Tu correo est\xe1 seguro con nosotros.",en:"Your email is safe with us."},{page:P,id:Y,es:"Contrase\xf1a",en:"Password"},{page:P,id:Z,es:"Debe contener como m\xednimo, un n\xfamero, una may\xfascula, un car\xe1cter especial, min\xfasculas y 8 o m\xe1s car\xe1cteres.",en:"It must contain at least a number, a capital letter, a special character, lowercase letters and 8 or more characters."},{page:P,id:$,es:"Enviar",en:"Send"},{page:P,id:X,es:"Autenticando",en:"Authenticating"},{page:P,id:ee,es:"\xa1Fallo de autenticaci\xf3n, verifique sus datos!",en:"Authentication failure, verify your data!"},{page:P,id:te,es:"Cambio de contrase\xf1a",en:"Change of password"},{page:P,id:ae,es:"Nombre",en:"Name"},{page:P,id:ne,es:"Ingresa tu nombre y apellido.",en:"Enter your first and last name."},{page:P,id:ie,es:"Actualizar contrase\xf1a",en:"Update password"},{page:D,id:se,es:"Perfil",en:"Profile"},{page:D,id:re,es:"Cerrar sesi\xf3n",en:"Log Out"},{page:D,id:oe,es:"Log In",en:"Log In"},{page:U,id:le,es:"Monitoreo",en:"Monitoring"},{page:U,id:ce,es:"Aqu\xed puedes ver en tiempo real las variables meteorol\xf3gicas sensadas.",en:"Here you can see in real time the sensed meteorological variables."},{page:U,id:me,es:"Hist\xf3rico",en:"Historical"},{page:U,id:de,es:"Aqu\xed puedes consultar registros hist\xf3ricos de las variables sensadas.",en:"Here you can consult historical records of the sensed variables."},{page:U,id:ue,es:"Predicciones",en:"Predictions"},{page:U,id:ge,es:"Aqu\xed puedes obtener informaci\xf3n de los eventos de heladas a 24 horas.",en:"Here you can get information about 24-hour frost events."},{page:z,id:pe,es:"Perfil",en:"Profile"},{page:z,id:he,es:"Correo:",en:"Email:"},{page:z,id:ve,es:"Nombres y Apellidos:",en:"Given Name:"},{page:z,id:fe,es:"N\xfamero Celular:",en:"Phone Number:"},{page:z,id:be,es:"Celular Verificado:",en:"Phone Number Verified:"},{page:z,id:Ee,es:"Correo Verificado:",en:"Email Verified:"},{page:z,id:Ne,es:"Si",en:"Yes"},{page:z,id:we,es:"No",en:"No"},{page:F,id:ye,es:"Predicciones",en:"Predictions"},{page:F,id:ke,es:"en las pr\xf3ximas 12 horas",en:"in the next 12 hours"},{page:F,id:Oe,es:"Alta probabilidad",en:"High probability"},{page:F,id:je,es:"Baja probabilidad",en:"Low probability"},{page:F,id:Ce,es:"No hay probabilidad",en:"No probability"},{page:F,id:Me,es:"de helada en 12 horas",en:"of frost in 12 hours"},{page:F,id:Le,es:"\xa1No hay predicciones en las pr\xf3ximas 12 horas!",en:"There are no predictions in the next 12 hours!"},{page:W,id:Te,es:"404",en:"404"},{page:W,id:_e,es:"\xa1Ooops! Est\xe1s en las nubes...",en:"Ooops! You are in the clouds..."},{page:W,id:Se,es:"La p\xe1gina que buscas no fue encontrada.",en:"The page you are looking for was not found."},{page:W,id:xe,es:"Vamos a casa",en:"We're going home"}]}},{key:"getWordi18nProps",value:function(){var e=this.getWord(this.props.id,this.props.page);return this.props.language===x?e.es:this.props.language===S?e.en:void 0}},{key:"getWordi18n",value:function(e,t,a){var n=this.getWord(t,e);return a===x?n.es:a===S?n.en:n.es}},{key:"getWord",value:function(e,t){return this.words.filter(function(a){return a.id===e&&a.page===t})[0]}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.text)}}]),t}(i.a.Component);Ae.defaultProps={language:x};var Ie=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.language;return i.a.createElement("div",{className:"bg-home"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center"},i.a.createElement("div",{className:"mb-auto"}),i.a.createElement("div",{className:"p-1"},i.a.createElement("img",{className:"mt-3 mb-3 logo",src:"/img/logo_sm_ic_1.png",width:"310",alt:"Logo of Faoa Home"})),i.a.createElement("div",{className:"p-1 text-center text-white"},i.a.createElement("h1",{className:"mt-2 mb-5 title-home"},i.a.createElement(Ae,{page:I,id:G,language:e})),i.a.createElement("hr",{className:"my-4"}),i.a.createElement("h4",{className:"mt-3 mb-5 desc-home"},i.a.createElement(Ae,{page:I,id:J,language:e}))),i.a.createElement("div",{className:"p-1 container-btn-light"},i.a.createElement(_.a,{className:"mt-5 mb-5 btn btn-light font-size-res-0",to:g.Login},i.a.createElement(Ae,{page:I,id:B,language:e}))))))}}]),t}(i.a.Component),Pe=Object(l.b)(function(e){return{language:e.language}})(Ie),De=a(28),Ue=a(11),ze=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e))).state={showPwd:!1},a.handleClickSeeIcon=a.onClickSeeIcon.bind(Object(Ue.a)(a)),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"onClickSeeIcon",value:function(){var e=this.state.showPwd;this.setState({showPwd:!e})}},{key:"render",value:function(){return i.a.createElement("div",{className:"container-see-input font-size-res-1"},i.a.createElement("input",{type:this.state.showPwd?"text":"password",id:this.props.id,name:this.props.name,minLength:this.props.minLength,maxLength:this.props.maxLength,className:"see-input",value:this.props.value,onChange:this.props.onChange,placeholder:this.props.placeholder,required:!0}),i.a.createElement("span",{className:"container-see-icon"},i.a.createElement("img",{className:"see-icon",src:this.state.showPwd?"img/see_ic_1.svg":"img/see_ic.svg",alt:"",width:"30",onClick:this.handleClickSeeIcon})))}}]),t}(i.a.Component);ze.defaultProps={minLength:8,maxLength:30};var Fe=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return this.props.showAlert?i.a.createElement("div",{className:"container-alert"},i.a.createElement("div",{className:"alert alert-danger",role:"alert"},i.a.createElement("span",{className:"container-warning-icon"},i.a.createElement("img",{className:"warning-icon",src:"img/warning.svg",alt:"imagen de warning",width:"50"})),i.a.createElement("span",{className:"container-warning-message font-size-res-1"},this.props.alertMessage))):null}}]),t}(i.a.Component);Fe.defaultProps={showAlert:!0,alertMessage:"\xa1Error!"};var We=function(){function e(){Object(f.a)(this,e),this.screenOrientation="",this.width=0,this.height=0,this.setScreenOrientation()}return Object(b.a)(e,[{key:"setScreenOrientation",value:function(){this.width=window.screen.width,this.height=window.screen.height,window.matchMedia("(orientation: portrait)").matches&&(this.screenOrientation="portrait"),window.matchMedia("(orientation: landscape)").matches&&(this.screenOrientation="landscape")}},{key:"isPortrait",value:function(){var e=!1;return"portrait"===this.screenOrientation&&(e=!0),e}},{key:"isLandscape",value:function(){var e=!1;return"landscape"===this.screenOrientation&&(e=!0),e}},{key:"isIphone4",value:function(){var e=!1;return 320===this.width&&480===this.height&&"portrait"===this.screenOrientation?e=!0:480===this.width&&320===this.height&&"landscape"===this.screenOrientation&&(e=!0),e}},{key:"isNokiaLumia520",value:function(){var e=!1;return 320===this.width&&533===this.height&&"portrait"===this.screenOrientation?e=!0:533===this.width&&320===this.height&&"landscape"===this.screenOrientation&&(e=!0),e}}]),e}(),He=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e)))._isMounted=!1,a.state={email:"",password:"",newpass:"",givenname:"",isLoaded:!1,isError:!1,isNewPass:!1,cognitoUser:"",dimens:new We},a.handleInputChange=a.handleInputChange.bind(Object(Ue.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ue.a)(a)),a.handleClick=a.handleClick.bind(Object(Ue.a)(a)),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,window.addEventListener("resize",function(){e._isMounted&&e.setState({dimens:new We})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleInputChange",value:function(e){e.preventDefault(),this.setState(Object(De.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isLoaded:!0});var a={Username:this.state.email,Password:this.state.password},n=new T.a(a),i=new T.c({UserPoolId:"us-west-2_YVFxZMFQh",ClientId:"4u6i4l80gdo9m08uhvfa4n4127"}),s={Username:this.state.email,Pool:i},r=new T.b(s);new Promise(function(e,t){return r.authenticateUser(n,{onSuccess:function(t){e(t)},onFailure:function(e){t(e)},mfaRequired:function(e){var t=prompt("Please input verification code","");r.sendMFACode(t,this)},newPasswordRequired:function(e,a){t({code:"newpassword",name:"newpassword",message:"password challenge"})}})}).then(function(e){t.setState({isLoaded:!1}),t.setState({isError:!1}),t.props.setJWTToken(e.getIdToken().getJwtToken()),t.props.setCognitoUser(r),t.props.setAuth(!0),t.props.history.push(g.Menu)},function(e){"newpassword"===e.code?(t.props.setCognitoUser(r),t.setState({isNewPass:!0,cognitoUser:r})):(t.setState({isError:!0}),t.props.setAuth(!1),t.props.history.push(g.Login)),t.setState({isLoaded:!1})})}},{key:"handleClick",value:function(e){var t=this;e.preventDefault();var a={given_name:this.state.givenname};new Promise(function(e,n){return t.state.cognitoUser.completeNewPasswordChallenge(t.state.newpass,a,{onSuccess:function(t){e(t)},onFailure:function(e){n(e)}})}).then(function(e){t.setState({isError:!1}),t.props.setJWTToken(e.getIdToken().getJwtToken()),t.props.setAuth(!0),t.props.history.push(g.Menu)},function(e){t.setState({isError:!0}),t.props.setAuth(!1),t.props.history.push(g.Login),console.log("Error",e)}),this.setState({isNewPass:!1})}},{key:"render",value:function(){var e=this.state,t=e.isError,a=e.dimens,n=this.props.language;return i.a.createElement("div",{className:"bg-login"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row align-items-center justify-content-center ".concat(t&&a.height<550&&a.isPortrait()?"hg":"hg-vh")},i.a.createElement("form",{className:"col-auto",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"mb-4 text-center"},i.a.createElement(_.a,{to:g.Home},i.a.createElement("img",{className:"mt-3 mb-3 logo",src:"/img/logo_sm_ic_1.png",width:"300",alt:"Logo of Faoa Login"})),i.a.createElement("h1",{className:"h3 mb-3 font-weight-normal font-size-res-3"},i.a.createElement(Ae,{page:P,id:q,language:n}))),i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"email",className:"form-control font-size-res-1",name:"email",id:"emailHelp",value:this.state.email,onChange:this.handleInputChange,placeholder:(new Ae).getWordi18n(P,K,n),required:!0}),i.a.createElement("small",{id:"emailHelp",className:"form-text text-muted font-size-res-0"},i.a.createElement(Ae,{page:P,id:Q,language:n}))),i.a.createElement("div",{className:"form-group"},i.a.createElement(ze,{name:"password",id:"passwordLog",value:this.state.password,onChange:this.handleInputChange,placeholder:(new Ae).getWordi18n(P,Y,n)})),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{type:"submit",className:"btn btn-lg btn-success btn-block font-size-res-btn",disabled:!!this.state.isLoaded},this.state.isLoaded?i.a.createElement("div",null,i.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),i.a.createElement("span",{className:"sr-only"},i.a.createElement(Ae,{page:P,id:X,language:n}))):i.a.createElement(Ae,{page:P,id:$,language:n}))),i.a.createElement("p",{className:"mt-5 mb-3 text-dark text-center font-size-res-1"},"\xa9 2019"),i.a.createElement(Fe,{showAlert:this.state.isError,alertMessage:(new Ae).getWordi18n(P,ee,n)}))),this.state.isNewPass?i.a.createElement("div",{className:"c-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle","aria-hidden":"true"},i.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-dialog-res",role:"document"},i.a.createElement("div",{className:"modal-content modal-content-res"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h5",{className:"modal-title m-auto text-center font-size-res-2",id:"modalTitle"},i.a.createElement(Ae,{page:P,id:te,language:n}))),i.a.createElement("div",{className:"modal-body"},i.a.createElement("input",{type:"text",className:"form-control font-size-res-1",name:"givenname",value:this.state.givenname,onChange:this.handleInputChange,placeholder:(new Ae).getWordi18n(P,ae,n)}),i.a.createElement("small",{className:"form-text text-muted font-size-res-0"},i.a.createElement(Ae,{page:P,id:ne,language:n}))),i.a.createElement("div",{className:"modal-body"},i.a.createElement(ze,{name:"newpass",value:this.state.newpass,onChange:this.handleInputChange,placeholder:(new Ae).getWordi18n(P,Y,n)}),i.a.createElement("small",{className:"form-text text-muted font-size-res-0"},i.a.createElement(Ae,{page:P,id:Z,language:n}))),i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{className:"btn btn-dark font-size-res-btn",type:"button",onClick:this.handleClick},i.a.createElement(Ae,{page:P,id:ie,language:n})))))):null))}}]),t}(i.a.Component),Re=Object(l.b)(function(e){return{language:e.language}},{setAuth:j,setCognitoUser:C,setJWTToken:M})(He),Ve=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.language;return i.a.createElement("div",{className:"container-menu-mobile"},i.a.createElement("div",{className:"container-menu-items"},i.a.createElement(_.a,{to:g.Dash},i.a.createElement("div",{className:"menu-item"},i.a.createElement("img",{className:"rounded-circle",src:"/img/menu_ic_1_n.png",alt:"Menu monitoring",width:"120"}),i.a.createElement("div",{className:"container-item bc-item-1"},i.a.createElement("h3",null,i.a.createElement(Ae,{page:U,id:le,language:e})),i.a.createElement("p",null,i.a.createElement(Ae,{page:U,id:ce,language:e}))))),i.a.createElement(_.a,{to:g.Hist},i.a.createElement("div",{className:"menu-item"},i.a.createElement("img",{className:"rounded-circle",src:"/img/menu_ic_2_n.png",alt:"Menu historical",width:"120"}),i.a.createElement("div",{className:"container-item bc-item-2"},i.a.createElement("h3",null,i.a.createElement(Ae,{page:U,id:me,language:e})),i.a.createElement("p",null,i.a.createElement(Ae,{page:U,id:de,language:e}))))),i.a.createElement(_.a,{to:g.Fore},i.a.createElement("div",{className:"menu-item"},i.a.createElement("img",{className:"rounded-circle",src:"/img/menu_ic_3_n.png",alt:"Menu forecast",width:"120"}),i.a.createElement("div",{className:"container-item bc-item-3"},i.a.createElement("h3",null,i.a.createElement(Ae,{page:U,id:ue,language:e})),i.a.createElement("p",null,i.a.createElement(Ae,{page:U,id:ge,language:e})))))))}}]),t}(i.a.Component),Ge=Object(l.b)(function(e){return{language:e.language}})(Ve),Je=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.language;return i.a.createElement("div",{className:"row mt-5 p-4 menu-desktop"},i.a.createElement("div",{className:"col-md-4 m-auto text-center"},i.a.createElement(_.a,{to:g.Dash},i.a.createElement("img",{className:"rounded-circle",src:"/img/menu_ic_1_n.png",alt:"Menu monitoring",width:"150"})),i.a.createElement("h2",{className:"font-size-res-3"},i.a.createElement(Ae,{page:U,id:le,language:e})),i.a.createElement("p",{className:"font-size-res-1"},i.a.createElement(Ae,{page:U,id:ce,language:e}))),i.a.createElement("div",{className:"col-md-4 m-auto text-center"},i.a.createElement(_.a,{to:g.Hist},i.a.createElement("img",{className:"rounded-circle",src:"/img/menu_ic_2_n.png",alt:"Menu historical",width:"150"})),i.a.createElement("h2",{className:"font-size-res-3"},i.a.createElement(Ae,{page:U,id:me,language:e})),i.a.createElement("p",{className:"font-size-res-1"},i.a.createElement(Ae,{page:U,id:de,language:e}))),i.a.createElement("div",{className:"col-md-4 m-auto text-center"},i.a.createElement(_.a,{to:g.Fore},i.a.createElement("img",{className:"rounded-circle",src:"/img/menu_ic_3_n.png",alt:"Menu forecast",width:"150"})),i.a.createElement("h2",{className:"font-size-res-3"},i.a.createElement(Ae,{page:U,id:ue,language:e})),i.a.createElement("p",{className:"font-size-res-1"},i.a.createElement(Ae,{page:U,id:ge,language:e}))))}}]),t}(i.a.Component),Be=Object(l.b)(function(e){return{language:e.language}})(Je),qe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e)))._isMounted=!1,a.state={dimens:new We},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,window.addEventListener("resize",function(){e._isMounted&&e.setState({dimens:new We})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},this.state.dimens.width<1025?i.a.createElement(Ge,null):i.a.createElement(Be,null))}}]),t}(i.a.Component),Ke=a(117),Qe=a(23),Ye=a(113),Ze=a.n(Ye),$e=null,Xe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e))).markers=[],a.isMarkersLoaded=!1,a._isMounted=!1,a.createCircle=function(){new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:a.state.map,center:{lat:a.props.devices[0].lat,lng:a.props.devices[0].lng},radius:500})},a.state={isMapLoaded:!1,map:"",dimens:new We},a.createMap=a.createMap.bind(Object(Ue.a)(a)),a.handleClickMarker.bind(Object(Ue.a)(a)),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"createMap",value:function(){var e={lat:5.5425466,lng:-73.3481806},t=5;this.props.devices.length>0&&(e={lat:this.props.devices[0].lat,lng:this.props.devices[0].lng},t=10),this.setState({map:new window.google.maps.Map(document.getElementById("google-map"),{zoom:t,center:e,disableDefaultUI:!1}),isMapLoaded:!0})}},{key:"createMarkers",value:function(){var e=this;if(!this.isMarkersLoaded){var t=this.getSizeMarkerIcon(),a={url:"img/map_dash_icon.png",scaledSize:new window.google.maps.Size(t.width,t.height)};this.props.devices.forEach(function(t){var n={lat:t.lat,lng:t.lng},i={device:t.device,thingName:t.city},s=new window.google.maps.Marker({position:n,map:e.state.map,searchTag:i});s.setIcon(a),s.addListener("click",e.handleClickMarker),e.markers.push(s)}),this.isMarkersLoaded=!0}}},{key:"getSizeMarkerIcon",value:function(){var e=35,t=45;return this.state.dimens.width>2550&&(e=45,t=55),this.state.dimens.width>3830&&(e=55,t=65),this.state.dimens.width>7670&&(e=65,t=75),{width:e,height:t}}},{key:"handleClickMarker",value:function(){!function(e){null!=$e&&$e.props.onClickMarker(e)}(this.searchTag)}},{key:"componentDidMount",value:function(){var e=this;if($e=this,this._isMounted=!0,window.addEventListener("resize",function(){e._isMounted&&(e.setState({dimens:new We}),e.reSizeMarkerIcon())}),window.google)console.log("Map loaded 2"),this.createMap();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyDF8QRNgcaEJWlQqDdB_7RVU19QWRe4PUg",window.document.body.appendChild(t),t.addEventListener("load",function(){console.log("Map loaded"),e.createMap()})}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.setMap(null)}},{key:"setMap",value:function(e){this.markers.forEach(function(t){t.setMap(e)})}},{key:"reSizeMarkerIcon",value:function(){var e=this.getSizeMarkerIcon(),t={url:"img/map_dash_icon.png",scaledSize:new window.google.maps.Size(e.width,e.height)};this.markers.forEach(function(e){e.setIcon(t)})}},{key:"paintOnMap",value:function(){this.state.isMapLoaded&&this.createMarkers()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.paintOnMap(),i.a.createElement("div",{className:"map",id:"google-map"}))}}]),t}(i.a.Component);Xe.defaultProps={devices:[]};var et=Xe,tt=a(36),at=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"d-flex flex-column"},i.a.createElement("div",null,i.a.createElement(tt.a,{chartType:"LineChart",options:{title:"External Temperature",series:{0:{targetAxisIndex:0},1:{targetAxisIndex:1},2:{targetAxisIndex:0}},vAxes:{0:{title:"Temperature (\xb0C)"},1:{title:"RH(%)"}},hAxis:{title:"Time",format:"H:mm"}},width:"100%",height:"300px",data:this.props.temperatureData})),i.a.createElement("div",null,i.a.createElement(tt.a,{chartType:"LineChart",options:{title:"Barometric Pressure",hAxis:{title:"Time",format:"H:mm"},vAxis:{title:"Pressure (hPa)"},legend:"right"},width:"100%",height:"300px",data:this.props.barometricData})),i.a.createElement("div",null,i.a.createElement(tt.a,{chartType:"LineChart",options:{title:"Visible Light",hAxis:{title:"Time",format:"H:mm"},vAxis:{title:"Luminous flux (lm)"},legend:"right"},width:"100%",height:"300px",data:this.props.visibleLightData})),i.a.createElement("div",null,i.a.createElement(tt.a,{chartType:"LineChart",options:{title:"Solar Radiation",hAxis:{title:"Time",format:"H:mm"},vAxis:{title:"Rad W/m^2"},legend:"right"},width:"100%",height:"300px",data:this.props.solarRadiationData})),i.a.createElement("div",null,i.a.createElement(tt.a,{chartType:"LineChart",options:{title:"Battery",hAxis:{title:"Time",format:"H:mm"},vAxis:{title:"Charge (%)"},legend:"right"},width:"100%",height:"300px",data:this.props.batteryData})))}}]),t}(i.a.Component);at.defaultProps={};var nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=encodeURI(e),n=it(t);return fetch(a,{method:"GET",headers:n}).then(function(e){return e.json()})},it=function(e){var t={};return null!=e&&Object.assign(t,{Authorization:e}),t},st=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e)))._isMounted=!1,a.state={error:"",isLoaded:!1,isToggleOn:!1,isResult:!1,thing:"",command:"",device:"",items:[],devices:[],isMap:!1,isGraphicsModal:!1,thingName:""},a.handleChange=a.handleChange.bind(Object(Ue.a)(a)),a.handleClick=a.handleClick.bind(Object(Ue.a)(a)),a.handleClickMarker=a.handleClickMarker.bind(Object(Ue.a)(a)),a.handleClickCloseModal=a.handleClickCloseModal.bind(Object(Ue.a)(a)),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"getDevices",value:function(){var e=this;this._isMounted&&nt(u.devices,this.props.jwtToken).then(function(t){t.records&&(t.records.forEach(function(t){e.state.devices.push({device:t[0].stringValue,city:t[1].stringValue,lat:t[2].doubleValue,lng:t[3].doubleValue})}),t.records.length===e.state.devices.length&&e.setState({isMap:!0})),e.props.setLoading(!1)},function(t){e.props.setLoading(!1),e.setState({error:t})})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.cognitoUser;this._isMounted=!0,this.props.setLoading(!0),null!=t?t.getSession(function(t,a){if(t)return console.log("An error getting the session: "+t),void e.props.setLoading(!1);a.isValid()?(e.props.setJWTToken(a.getIdToken().getJwtToken()),Qe.config.region="us-west-2",Qe.config.credentials=new Qe.CognitoIdentityCredentials({IdentityPoolId:"us-west-2:b44135bd-2d70-4573-b3eb-413076376e57",Logins:{"cognito-idp.us-west-2.amazonaws.com/us-west-2_YVFxZMFQh":a.getIdToken().getJwtToken()}}),Qe.config.credentials.get(function(){var t=Qe.config.credentials.accessKeyId,a=Qe.config.credentials.secretAccessKey,n=Qe.config.credentials.sessionToken,i="iWeb-"+Math.floor(1e3*Math.random()+1);new Qe.Iot({accessKeyId:t,secretAccessKey:a,sessionToken:n}).attachPrincipalPolicy({policyName:"Faoa_IoT_Web_Policy",principal:Qe.config.credentials.identityId},function(s,r){s&&console.error(s);var o=Ze.a.device({region:"us-west-2",host:"axiyln2cq3245-ats.iot.us-west-2.amazonaws.com",clientId:i,protocol:"wss",accessKeyId:t,secretKey:a,sessionToken:n});e.setState({device:o}),o.on("connect",function(){console.log("Connected to AWS IoT"),e.getDevices()}),o.on("close",function(){console.log("Connection closed to AWS IoT"),e.props.setLoading(!1)}),o.on("message",function(t,a){var n={deviceId:t,payloadtimestamp:(new Date).getTime(),data:JSON.parse(a.toString())},i=Object(Ke.a)(e.state.items);i.slice(1,1),i.push(n),e.setState({items:i}),console.log("message",n)})})})):(console.log("Unexpected value getting the session"),e.props.setLoading(!1))}):(console.log("The cognito user is empty"),this.props.setLoading(!1))}},{key:"componentWillUnmount",value:function(){var e=this,t=this.state.device;this._isMounted=!1,this.props.setLoading(!1),this.state.isToggleOn&&t.unsubscribe(this.state.thing+"/c1",function(){console.log("Info","Unsubscribed from "+e.state.thing+"/c1")}),t&&t.end(!1)}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(De.a)({},e.target.name,e.target.value))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault();var a=this.state.device;"btn_mon"===e.target.name?(this.state.isToggleOn?a.unsubscribe(this.state.thing+"/c1",function(){console.log("Info","Unsubscribed from "+t.state.thing+"/c1")}):(this.refresh(),a.subscribe(this.state.thing+"/c1",function(){console.log("Info","Subscribed to "+t.state.thing+"/c1")})),this.setState(function(e){return{isToggleOn:!e.isToggleOn}})):"btn_cmd"===e.target.name&&a.publish(this.state.thing+"/c2",this.state.command,function(){console.log("Info","Published to "+t.state.thing+"/c2")})}},{key:"handleClickMarker",value:function(e){var t=this;this.setState({thing:e.device,thingName:e.thingName});var a=this.state.device;this.refresh(),a.subscribe(this.state.thing+"/c1",function(){console.log("Info","Subscribed to "+t.state.thing+"/c1")}),this.setState(function(e){return{isToggleOn:!e.isToggleOn,isGraphicsModal:!e.isGraphicsModal}})}},{key:"handleClickCloseModal",value:function(){var e=this;this.state.device.unsubscribe(this.state.thing+"/c1",function(){console.log("Info","Unsubscribed from "+e.state.thing+"/c1")}),this.setState(function(e){return{isToggleOn:!e.isToggleOn,isGraphicsModal:!e.isGraphicsModal}})}},{key:"isShowModal",value:function(){return this.state.isGraphicsModal?"m-modal-show":"m-modal-hide"}},{key:"refresh",value:function(){var e=this;this.setState({isLoaded:!0});var t=this.state.thing;nt(u.devices+t+"/records?date="+(new Date).getTime(),this.props.jwtToken).then(function(t){e.setState({isLoaded:!1,items:t.Items})},function(t){e.setState({isLoaded:!1,error:t})})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded,n=e.items,s=e.isToggleOn,r=e.isMap,o=e.devices,l=this.props.language;if(t)return i.a.createElement("div",null,"Error: ",t.message);var c=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.T,e.data.H,Math.pow(e.data.H/100,1/8)*(110+e.data.T)-110]}),m=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.P/100]}),d=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.L]}),u=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.R]}),g=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.BAT.C]});return c.unshift(["Date","Temperature","Humidity","Td"]),m.unshift(["Date","Pressure"]),d.unshift(["Date","Light"]),u.unshift(["Date","Radiation"]),g.unshift(["Date","Battery"]),i.a.createElement(i.a.Fragment,null,r?i.a.createElement(i.a.Fragment,null,i.a.createElement(et,{devices:o,onClickMarker:this.handleClickMarker}),i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"m-5 p-2"})," ",i.a.createElement("div",{className:"m-modal ".concat(this.isShowModal()),id:"graphicsModal"},i.a.createElement("div",{className:"modal-dialog m-dialog modal-xl modal-dialog-scrollable"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h2",{className:"modal-title font-size-res-2 modal-title-dash"},this.state.thingName),i.a.createElement("button",{type:"button",className:"close modal-close",onClick:this.handleClickCloseModal},"\xd7")),i.a.createElement("div",{className:"modal-body"},n.length>0&&c.length>=n.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-auto order-md-2"},i.a.createElement("form",{className:"p-1"},i.a.createElement("div",{className:"input-group input-group-dash"},i.a.createElement("input",{type:"text",className:"form-control font-size-res-0",name:"command",value:this.state.command,onChange:this.handleChange,placeholder:(new Ae).getWordi18n(A,V,l)}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{disabled:!s,className:"btn btn-primary font-size-res-0",type:"button",name:"btn_cmd",onClick:this.handleClick},i.a.createElement(Ae,{page:A,id:R,language:l})))))),i.a.createElement(at,{temperatureData:c,barometricData:m,visibleLightData:d,solarRadiationData:u,batteryData:g})):s&&!a?i.a.createElement("div",{className:"alert alert alert-info text-center font-size-res-0",role:"alert"},i.a.createElement(Ae,{page:A,id:H,language:l})):null)))))):null)}}]),t}(i.a.Component),rt=Object(l.b)(function(e){return{cognitoUser:e.cognitoUser,jwtToken:e.jwtToken,language:e.language}},{setJWTToken:M,setLoading:L})(st),ot=function(e){function t(e){var a;Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e)))._isMounted=!1;var n=new Date;return a.state={error:null,isResult:!1,isLoaded:!1,datetime:new Date(n.getTime()-6e4*n.getTimezoneOffset()).toISOString().replace(/\.\d+Z$/g,""),epoch:new Date((new Date).toISOString().replace(/\.\d+Z$/g,"")).getTime(),value:"",items:[],options:null},a.handleChange=a.handleChange.bind(Object(Ue.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(Ue.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ue.a)(a)),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.setLoading(!0),this.getDevices()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.props.setLoading(!1)}},{key:"getDevices",value:function(){var e=this;this._isMounted&&nt(u.devices,this.props.jwtToken).then(function(t){if(t.records){var a=t.records[0],n=t.records.map(function(e){return i.a.createElement("option",{key:e[0].stringValue,value:e[0].stringValue},e[1].stringValue)});e.setState({value:a[0].stringValue,options:n})}e.props.setLoading(!1)},function(t){e.props.setLoading(!1),e.setState({error:t})})}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState({value:e.target.value})}},{key:"handleInputChange",value:function(e){var t;e.preventDefault(),this.setState((t={},Object(De.a)(t,e.target.name,e.target.value),Object(De.a)(t,"epoch",new Date(e.target.value).getTime()),t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isLoaded:!0}),fetch(u.devices+this.state.value+"/records?date="+this.state.epoch,{method:"GET",headers:{Authorization:this.props.jwtToken}}).then(function(e){return e.json()}).then(function(e){t.setState({isLoaded:!1,items:e.Items}),e?t.setState({isResult:!0}):t.setState({isResult:!1})},function(e){t.setState({isLoaded:!1,error:e})})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded,n=e.items,s=e.isResult,r=e.options,o=this.props.language;if(t)return i.a.createElement("div",null,"Error: ",t.message);var l=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.T,e.data.H,Math.pow(e.data.H/100,1/8)*(110+e.data.T)-110]}),c=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.P/100]}),m=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.L]}),d=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.R]}),u=n.map(function(e){return[new Date(e.payloadtimestamp),e.data.BAT.C]});return l.unshift(["Date","Temperature","Humidity","Td"]),c.unshift(["Date","Pressure"]),m.unshift(["Date","Light"]),d.unshift(["Date","Radiation"]),u.unshift(["Date","Battery"]),i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"m-5 p-2"})," ",i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-auto col-auto-hist"},i.a.createElement("form",{className:"p-1"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-group order-2 ml-2"},i.a.createElement("select",{className:"form-control-select",value:this.state.value,onChange:this.handleChange},r)),i.a.createElement("div",{className:"form-group order-1 ml-2"},i.a.createElement("input",{className:"form-control font-size-res-0",type:"datetime-local",name:"datetime",value:this.state.datetime,onChange:this.handleInputChange,step:"1"})),i.a.createElement("div",{className:"form-group order-2 ml-2"},i.a.createElement("button",{type:"button",className:"btn btn-md btn-primary btn-block font-size-res-0 btn-hist",onClick:this.handleSubmit},a?i.a.createElement("div",null,i.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),i.a.createElement("span",{className:"sr-only"},"Loading ...")):i.a.createElement(Ae,{page:A,id:R,language:o}))))))),n.length>0?i.a.createElement(at,{temperatureData:l,barometricData:c,visibleLightData:m,solarRadiationData:d,batteryData:u}):s?i.a.createElement("div",{className:"alert alert alert-info text-center font-size-res-0",role:"alert"},i.a.createElement(Ae,{page:A,id:H,language:o})):null)}}]),t}(i.a.Component),lt=Object(l.b)(function(e){return{jwtToken:e.jwtToken,language:e.language}},{setLoading:L})(ot),ct=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e)))._isMounted=!1,a.state={error:"",isLoaded:!1,forecasts:[],dimens:new We},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.setLoading(!0),this.getForecasts(),window.addEventListener("resize",function(){e._isMounted&&e.setState({dimens:new We})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.props.setLoading(!1)}},{key:"getForecasts",value:function(){var e=this;this._isMounted&&nt(u.forecasts,this.props.jwtToken).then(function(t){e.props.setLoading(!1),e.setState({isLoaded:!0,forecasts:t})},function(t){e.props.setLoading(!1),e.setState({error:t})})}},{key:"validateCenterView",value:function(){var e=null;return null!=this.state.forecasts&&(this.state.dimens.width>1200&&this.state.forecasts.length>=4&&(e="hg"),this.state.dimens.width>1760&&this.state.forecasts.length>=4&&(e=null),this.state.dimens.width>1760&&this.state.forecasts.length>=6&&(e="hg")),e}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.forecasts,n=this.props.language;return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"m-5 p-2"})," ",i.a.createElement("div",{className:"container-forecast ".concat(this.validateCenterView())},i.a.createElement("div",{className:"m-auto text-center title-fore"},i.a.createElement("h3",{className:"font-size-res-3"},i.a.createElement(Ae,{page:F,id:ye,language:n})),i.a.createElement("h5",{className:"font-size-res-2"},i.a.createElement(Ae,{page:F,id:ke,language:n}))),t?a.length>0?i.a.createElement("div",{className:"parent-item-fore"},a.map(function(e){return i.a.createElement("div",{key:e.device+"-"+e.forecast,className:"item-fore"},i.a.createElement("div",{className:"container-title"},i.a.createElement("h5",{className:"font-size-res-1"},e.device),i.a.createElement("span",{className:"triangle"})),i.a.createElement("div",{className:"container-desc font-size-res-0"},i.a.createElement("p",null,"H"===e.level?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"fore-color-red"},i.a.createElement(Ae,{page:F,id:Oe,language:n}))):"M"===e.level?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"fore-color-green"},i.a.createElement(Ae,{page:F,id:je,language:n}))):"L"===e.level?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"fore-color-skyBlue"},i.a.createElement(Ae,{page:F,id:Ce,language:n}))):null,"\xa0",i.a.createElement(Ae,{page:F,id:Me,language:n})," ",i.a.createElement("span",{className:"fore-color-gray"},e.forecast,"%"))))})):i.a.createElement("div",{className:"alert alert alert-info text-center font-size-res-0",style:{width:"100%"},role:"alert"},i.a.createElement(Ae,{page:F,id:Le,language:n})):null))}}]),t}(i.a.Component),mt=Object(l.b)(function(e){return{jwtToken:e.jwtToken,language:e.language}},{setLoading:L})(ct),dt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e))).createCircle=function(){new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:a.state.map,center:{lat:43.642567,lng:-79.387054},radius:500})},a.state={map:""},a.createMap=a.createMap.bind(Object(Ue.a)(a)),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"createMap",value:function(){this.setState({map:new window.google.maps.Map(document.getElementById("google-map"),{zoom:16,center:{lat:43.642567,lng:-79.387054},disableDefaultUI:!1})})}},{key:"createMarker",value:function(){new window.google.maps.Marker({position:{lat:43.642567,lng:-79.387054},map:this.state.map})}},{key:"componentDidMount",value:function(){var e=this;if(window.google)this.createMap();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyDF8QRNgcaEJWlQqDdB_7RVU19QWRe4PUg",window.document.body.appendChild(t),t.addEventListener("load",function(){e.createMap(),e.createCircle()})}}},{key:"render",value:function(){return i.a.createElement("div",{className:"map",id:"google-map"})}}]),t}(i.a.Component),ut=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.language;return i.a.createElement("div",{className:"container-fluid "},i.a.createElement("div",{className:"overlay"},i.a.createElement("div",{className:"x1"},i.a.createElement("div",{className:"cloud my-5"})),i.a.createElement("div",{className:"x2"},i.a.createElement("div",{className:"cloud my-5"})),i.a.createElement("div",{className:"x3"},i.a.createElement("div",{className:"cloud my-5"})),i.a.createElement("div",{className:"x4"},i.a.createElement("div",{className:"cloud my-5"})),i.a.createElement("div",{className:"x5"},i.a.createElement("div",{className:"cloud my-5"})),i.a.createElement("div",{className:"x1"},i.a.createElement("div",{className:"cloud my-5"}))),i.a.createElement("div",{className:"container-notFound"},i.a.createElement("div",{className:"flex-column"},i.a.createElement("h1",{className:"display-1"},i.a.createElement(Ae,{page:W,id:Te,language:e})),i.a.createElement("p",{className:"h1"},i.a.createElement(Ae,{page:W,id:_e,language:e})),i.a.createElement("p",{className:"h2"},i.a.createElement(Ae,{page:W,id:Se,language:e})),i.a.createElement(_.a,{className:"btn btn-outline-secondary font-size-res-0",to:g.Menu},i.a.createElement(Ae,{page:W,id:xe,language:e})))))}}]),t}(i.a.Component),gt=Object(l.b)(function(e){return{language:e.language}})(ut),pt=a(51),ht=a(540),vt=function(e){var t=e.component,a=e.props,n=Object(pt.a)(e,["component","props"]);return i.a.createElement(k.a,Object.assign({},n,{render:function(e){return a.isAuth?i.a.createElement(t,Object.assign({},e,a)):i.a.createElement(ht.a,{to:{pathname:p.Private,state:{from:e.location}}})}}))},ft=function(e){var t=e.component,a=e.props,n=Object(pt.a)(e,["component","props"]);return i.a.createElement(k.a,Object.assign({},n,{render:function(e){return a.isAuth?i.a.createElement(ht.a,{to:p.Public}):i.a.createElement(t,Object.assign({},e,a))}}))},bt=a(539),Et=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e)))._isMounted=!1,a.state={error:"",attributes:[],dimens:new We},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.cognitoUser;this._isMounted=!0,this.props.setLoading(!0),window.addEventListener("resize",function(){e._isMounted&&e.setState({dimens:new We})}),null!=t?t.getSession(function(a,n){if(a)return console.log("An error getting the session: "+a),void e.props.setLoading(!1);n.isValid()?t.getUserAttributes(function(t,a){t?(console.log("An error getting attributes: "+t),e.setState({error:t})):e.setState({attributes:a.reverse()}),e.props.setLoading(!1)}):(console.log("Unexpected value getting the session"),e.props.setLoading(!1))}):(console.log("The cognito user is empty"),this.props.setLoading(!1))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.props.setLoading(!1)}},{key:"validatePhoneView",value:function(){return this.state.dimens.width<1020?"col-12":"col-6"}},{key:"render",value:function(){var e=this.props.language;return i.a.createElement(i.a.Fragment,null,this.state.attributes.length>0?i.a.createElement("div",{className:"container-profile"},i.a.createElement("div",{className:"font-size-res-0"},this.state.attributes.map(function(t){return"email"===t.Name?i.a.createElement("div",{key:t.Name,className:"parent"},i.a.createElement("div",{className:"container-icon"},i.a.createElement("img",{className:"icon",src:"/img/ic_email.png",alt:"ic-email",width:"30"})),i.a.createElement("div",{className:"container-text"},i.a.createElement("span",{id:"email"},t.Value))):"given_name"===t.Name?i.a.createElement("div",{key:t.Name,className:"parent"},i.a.createElement("div",{className:"container-icon"},i.a.createElement("img",{className:"icon",src:"/img/ic_name.png",alt:"ic-name",width:"30"})),i.a.createElement("div",{className:"container-text"},i.a.createElement("span",{id:"given_name"},t.Value))):"phone_number"===t.Name?i.a.createElement("div",{key:t.Name,className:"parent"},i.a.createElement("div",{className:"container-icon"},i.a.createElement("img",{className:"icon",src:"/img/ic_phone.png",alt:"ic-phone",width:"30"})),i.a.createElement("div",{className:"container-text"},i.a.createElement("span",{id:"phone_number"},t.Value))):"phone_number_verified"===t.Name?i.a.createElement("div",{key:t.Name,className:"parent"},i.a.createElement("div",{className:"container-icon"},i.a.createElement("img",{className:"icon",src:"/img/ic_phone_verified.png",alt:"ic-phone-verified",width:"30"})),i.a.createElement("div",{className:"container-text"},i.a.createElement("span",{id:"phone_number_verified",className:""},t.Value?i.a.createElement(Ae,{page:z,id:Ne,language:e}):i.a.createElement(Ae,{page:z,id:we,language:e})))):"email_verified"===t.Name?i.a.createElement("div",{key:t.Name,className:"parent"},i.a.createElement("div",{className:"container-icon"},i.a.createElement("img",{className:"icon",src:"/img/ic_email_verified.png",alt:"ic-email-verified",width:"30"})),i.a.createElement("div",{className:"container-text"},i.a.createElement("span",{id:"email_verified"},t.Value?i.a.createElement(Ae,{page:z,id:Ne,language:e}):i.a.createElement(Ae,{page:z,id:we,language:e})))):null}))):null)}}]),t}(i.a.Component),Nt=Object(l.b)(function(e){return{cognitoUser:e.cognitoUser,language:e.language}},{setLoading:L})(Et),wt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e))).state={isCollapsed:!0,isMenu:!1,navbarColor:"",navbarImage:"",isProfileModal:!1},a.handleClick=a.handleClick.bind(Object(Ue.a)(a)),a.handleProfileModal=a.handleProfileModal.bind(Object(Ue.a)(a)),a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.setState(function(e){return{isCollapsed:!e.isCollapsed}})}},{key:"handleProfileModal",value:function(){this.setState(function(e){return{isProfileModal:!e.isProfileModal}})}},{key:"geti18nPageNavbar",value:function(){var e="";switch(this.props.pathLocation){default:e=U;break;case g.Profile:e=D}return e}},{key:"getTitleNavbarId",value:function(){var e="";switch(this.props.pathLocation){default:e=le;break;case g.Profile:e=se;break;case g.Dash:e=le;break;case g.Hist:e=me;break;case g.Fore:e=ue}return e}},{key:"getBackgroundColorNavbar",value:function(){var e="";switch(this.props.pathLocation){default:e="bg-navbar-menu";break;case g.Dash:e="bg-navbar-dashboard";break;case g.Hist:e="bg-navbar-history";break;case g.Fore:e="bg-navbar-forecast"}return e}},{key:"getImageNavbar",value:function(){var e="";switch(this.props.pathLocation){default:e="logo_sm_ic_3.png";break;case g.Menu:case g.Profile:e="logo_sm_ic_1.png"}return e}},{key:"isShowModal",value:function(){return this.state.isProfileModal?"m-modal-show":"m-modal-hide"}},{key:"render",value:function(){var e=this.state.isCollapsed,t=this.props.language;return this.props.showNavbar?i.a.createElement(i.a.Fragment,null,i.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-faoa fixed-top ".concat(this.getBackgroundColorNavbar())},i.a.createElement("div",{className:"container-fluid"},i.a.createElement(bt.a,{className:"navbar-brand",to:g.Menu},i.a.createElement("img",{className:"m-1",src:"/img/".concat(this.getImageNavbar()),width:"160",alt:"Logo of Faoa Nav"})),this.props.pathLocation===g.Menu?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"navbar-toggler"+(e?" collapsed":""),type:"button",onClick:this.handleClick,"data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false"},i.a.createElement("span",{className:"my-1 mx-2 close"},"X"),i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("div",{className:"navbar-collapse"+(e?" collapse":""),id:"navbarResponsive"},i.a.createElement("ul",{className:"navbar-nav ml-auto mt-3"},i.a.createElement("li",{className:"nav-item text-right"},this.props.isAuth?i.a.createElement("div",{className:"container-nav-link"},i.a.createElement(bt.a,{className:"nav-link",to:g.Menu,onClick:this.handleProfileModal},i.a.createElement("div",{className:"container-nav-item"},i.a.createElement("div",{className:"icon"},i.a.createElement("img",{id:"ic-profile",src:"/img/ic_profile.png",alt:"ic_profile",width:"20"})),i.a.createElement("div",{className:"text"},i.a.createElement("p",{className:"font-size-res-0"},i.a.createElement(Ae,{page:D,id:se,language:t}))))),i.a.createElement(bt.a,{className:"nav-link",to:g.Menu,onClick:this.props.handleLogout},i.a.createElement("div",{className:"container-nav-item"},i.a.createElement("div",{className:"icon"},i.a.createElement("img",{id:"ic-logout",src:"/img/ic_logout.png",alt:"ic_logout",width:"30"})),i.a.createElement("div",{className:"text"},i.a.createElement("p",{className:"font-size-res-0"},i.a.createElement(Ae,{page:D,id:re,language:t})))))):i.a.createElement(bt.a,{className:"nav-link",to:g.Login},i.a.createElement(Ae,{page:D,id:oe,language:t})))))):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container-navbar-title"},i.a.createElement("div",{className:"container-line-title"},i.a.createElement("div",{className:"line"}),i.a.createElement("div",{className:"navbar-font-color-white font-size-res-1"},i.a.createElement(Ae,{page:this.geti18nPageNavbar(),id:this.getTitleNavbarId(),language:t}))))))),i.a.createElement("div",{className:"m-modal ".concat(this.isShowModal()),id:"profileModal"},i.a.createElement("div",{className:"container-dialog"},i.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h2",{className:"modal-title font-size-res-2 modal-title-dash"},i.a.createElement(Ae,{page:z,id:pe,language:t})),i.a.createElement("button",{type:"button",className:"close modal-close",onClick:this.handleProfileModal},"\xd7")),i.a.createElement("div",{className:"modal-body"},i.a.createElement(Nt,null))))))):null}}]),t}(i.a.Component);wt.defaultProps={showNavbar:!0};var yt=Object(l.b)(function(e){return{language:e.language}})(wt),kt="black",Ot="blue",jt=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"getClassBgColor",value:function(){var e="";switch(this.props.bgColor){default:case kt:e="bg-color-black-50";break;case Ot:e="bg-color-blue-50"}return e}},{key:"render",value:function(){return this.props.showLoading?i.a.createElement("div",{className:"container-loading ".concat(this.getClassBgColor())},i.a.createElement("div",{className:"container-spinner"},i.a.createElement("div",{className:"loader"}))):null}}]),t}(i.a.Component);jt.defaultProps={showLoading:!0,bgColor:kt};a(537);var Ct=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(N.a)(t).call(this,e))).handleLogout=function(e){e.preventDefault(),a.props.setAuth(!1);var t=a.props.cognitoUser;null!=t&&t.signOut()},a.state={isChecking:!0,cognitoUser:"",path:[g.Menu,g.Profile,g.Dash,g.Hist,g.Fore]},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.setLanguage(x);var t=new T.c({UserPoolId:"us-west-2_YVFxZMFQh",ClientId:"4u6i4l80gdo9m08uhvfa4n4127"}).getCurrentUser();null!=t?t.getSession(function(a,n){a?(e.props.setAuth(!1),e.props.setCognitoUser(null),e.setState({isChecking:!0}),console.log("An error getting the session: "+a)):n.isValid()?(e.props.setJWTToken(n.getIdToken().getJwtToken()),e.props.setCognitoUser(t),e.setState({isChecking:!1}),e.props.setAuth(!0),console.log("Valid session")):(e.props.setAuth(!1),e.props.setCognitoUser(null),e.setState({isChecking:!0}),console.log("Unexpected value getting the session"))}):(this.props.setAuth(!1),this.props.setCognitoUser(null),this.setState({isChecking:!1}),console.log("The cognito user is empty"))}},{key:"render",value:function(){var e={isAuth:this.props.isAuth},t=this.state.path.includes(this.props.location.pathname)&&this.props.isAuth;return!this.state.isChecking&&i.a.createElement("div",null,i.a.createElement(yt,{showNavbar:t,pathLocation:this.props.location.pathname,isAuth:this.props.isAuth,handleLogout:this.handleLogout}),i.a.createElement(y.a,null,i.a.createElement(k.a,{path:g.Home,exact:!0,component:Pe}),i.a.createElement(ft,{path:g.Login,component:Re,props:e}),i.a.createElement(vt,{path:g.Menu,component:qe,props:e}),i.a.createElement(vt,{path:g.Dash,component:rt,props:e}),i.a.createElement(vt,{path:g.Hist,component:lt,props:e}),i.a.createElement(vt,{path:g.Fore,component:mt,props:e}),i.a.createElement(k.a,{path:g.Geofence,component:dt}),i.a.createElement(k.a,{component:gt})),i.a.createElement(jt,{showLoading:this.props.isLoaded}))}}]),t}(i.a.Component),Mt=Object(O.a)(Object(l.b)(function(e){return{isAuth:e.isAuth,cognitoUser:e.cognitoUser,isLoaded:e.isLoaded}},{setAuth:j,setCognitoUser:C,setJWTToken:M,setLanguage:function(e){return{type:m.APP_LANGUAGE,payload:e}}})(Ct)),Lt=Object(c.b)(v);r.a.render(i.a.createElement(l.a,{store:Lt},i.a.createElement(o.a,null,i.a.createElement(Mt,null))),document.getElementById("root"))},57:function(e,t){}},[[118,1,2]]]);
//# sourceMappingURL=main.cf8558da.chunk.js.map